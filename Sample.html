<html>
<head>
<title>ダウンロード</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" type="text/css" href="ruby.css">
<link rel="shortcut icon" href="favicon.ico">
<link rel="icon" href="favicon.ico">
<script type="text/javascript" src="extras/jquery.min.1.7.js"></script>
<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
<script src="js/lightbox.js"></script>
<script type="text/javascript" src="js/filesaver.js"></script>
<script type="text/javascript" src="http://stuk.github.io/jszip/dist/jszip.js"></script>
<link rel="stylesheet" href="css/lightbox.css" />
<style type="text/css">
.lb-data .lb-closeContainer .lb-close{
	position:fixed !important;
	z-index:9999 !important;
	top:20px !important;
	left: 20px !important;
	right: auto !important;
}

input + label {
	color:white;
	display: inline-block;
	margin:3px;
    cursor: pointer;
	text-align:center;
	border: 2px solid rgba(0,0,0,0);
	-webkit-transition: all 0.3s;
	-moz-transition: all 0.3s;
	transition: all 0.3s;
}
label{
	height:54px;
}
input:checked + label { 
	border: 2px dotted rgba(255,255,255,1.0);
	background: #0B614B;
}

input {
	display:none;
	position:relative;
	z-index:4;
	margin-right:-20px;
}
.sample{
	position:absolute;
	float:right;
	right:200px;
	top:20px;
	width:200px;
	height:200px;
}
#icons{
text-align:center;
margin-top:-50px;
}

</style>
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<!-- Save for Web Slices (back.psd) -->
<div style="position: absolute; top: 0px; left: 50px; height:100%; width: auto;">
<div id="align"> 
	<div id="content">
		<div class="box_ov">
			<div  id="box_in" style="height:675; width:950;margin: 0 30px;padding:30px;">
			<div>
			<div class="sample"></div>
			<h3> Twitterアイコン(200x200)配布中！</h3>
			<span style="font-size:10px">
			※主義事項<br/>
			・アイコン内の作者表記を消さないでください。<br/>
			・二次配布禁止。<br/>
			・Twitter以外の使用については、アイコンに表記されている作者にお問い合わせください。<br/>
			</span>
			<span id="help">(右クリック→対象をファイルに保存、もしくは↓)</span><br/>
			<button id="matome">チェックしたアイコンをまとめてzipダウンロード</button><br>
			<h5 id="err">ＤＬしたいアイコンをチェックてください</h5>
			<form id="icons"></form>
			</div>
			<h3>かわいい温泉グラフィグ配布中！</h3>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAejZoOUJLX1hLYXM">・全部ダウンロード（53.0mb）<br/></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAeUg4eE16OWppNEk"><div class="gra-0000-13"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAcDVUNDR5QU9nSTQ&"><div class="gra-0001-12"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAbDZmdG9IbWJ2anM&"><div class="gra-0002-11"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAREZWTElyZE9CUmc&"><div class="gra-0003-10"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAeDhzY2xJSXBDX3c&"><div class="gra-0004-9"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAOE56ZmM1QW1XNk0&"><div class="gra-0005-8"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAV0wyNWR2aTRTWnM&"><div class="gra-0006-7"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAeGk5MHpUS3d5YjA&"><div class="gra-0007-6"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAZlp2RmlVQjlVWWM&"><div class="gra-0008-5"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAOC13TVRvTWVQbTg&"><div class="gra-0009-4"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjARWVXNEF1d2dELVU&"><div class="gra-0010-3"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAaDhCclkwTlhaTUk&"><div class="gra-0011-2"></div></a>
			<a href="https://drive.google.com/uc?export=download&id=0B2pOZywE5TjANk1nUHl4Wk16Uk0&"><div class="gra-0012-1"></div></a>
		
			<h3> WEB体験版（？）公開中！</h3>
			・アイコンが貰える！
			<br/>
			<a href="#" id="game_open" >
			<img src="images/fake.jpg" style="margin-left:240px">
			</a>
			<br/>
			<br/>
			<br/>
			<br/>
			<br/>
			<img src="images/null_t.png">
		</div>
		<div class="bottom_fade"></div>
		<div class="top_fade"></div>
		</div>
		<div class="box2">
			<a href="main.html" class="Button4 but02_06"></a>
			<a href="story.html" class="Button4 but02_01"></a>
			<a href="cha_ra.html" class="Button4 but02_02"></a>
			<a href="gallery.html" class="Button4 but02_03"></a>
			<a href="info.html" class="Button4 but02_04"></a>
			<a href="#" class="Button3 but02_05"></a>
			</div>
		<div class="box_side side-05">
		</div>
	</div>
	</div>
</div>

</div>
	<!-- custom scrollbar plugin -->
	<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>	
	<script>
	if ( $.browser.msie&&$.browser.version*1<10 ) {
		$('#box_in').css({'height':'650px',
						 'overflow':'scroll',
						'z-index':'10000',
						'scrollbar-track-color':'#000'});
	}
	else{
	(function($){
			$(document).ready(function(){
				$("#box_in").mCustomScrollbar({
					autoHideScrollbar:true,
					theme:"rounded-dots"
				});
				
			});
		})(jQuery);
	}

	$(function(){
			$('#icons').append('<br/>背景あり<br/>');	
			for(var i=1;i<=21;i++){
			$('<input id="checkbox'+i+'" type="checkbox" name="iconses" ></input>').attr('value','icon'+i+'.png').appendTo('#icons');
			$('<label/>').appendTo('#icons').attr({'id':'label'+i,'for':'checkbox'+i+''}).css({'cursor':'pointer'});
			$('<img/>').appendTo('#label'+i).attr('src','images/icon/icon'+i+'.png').css({'width':'50px','height':'auto'}).click(function(e){
				$('.sample').html($('<img>').attr('src',this.src));
				});
				
			if(i%11==0){
			$('#icons').append('<br/>');
			}
			}
			$('#icons').append('<br/>背景なし<br/>');	
			for(var i=1;i<=21;i++){
				$('<input id="checkbox'+(i+21)+'" type="checkbox" name="iconses" ></input>').attr('value','icon'+i+'_trans.png').appendTo('#icons');
				$('<label/>').appendTo('#icons').attr({'id':'label'+(i+21),'for':'checkbox'+(i+21)+''}).css({'cursor':'pointer'});
				$('<img/>').appendTo('#label'+(i+21)).attr('src','images/icon/icon'+i+'_trans.png').css({'width':'50px','height':'auto'}).click(function(e){
					$('.sample').html($('<img>').attr('src',this.src));
					});
				
				if(i%11==0){
				$('#icons').append('<br/>');
				}
			}

			
			if(isIE()){
					$('input').css('display','inline');
				}
			if((navigator.userAgent.indexOf('Chrome')==-1)&&(navigator.userAgent.indexOf('Safari')!=-1)||( $.browser.msie&&$.browser.version*1<10)){	
					$('#matome').remove();
					$('input').remove();
					$('label').css('cursor','none	');
					$('#help').html('(右クリック→対象をファイルに保存)');
					$('label img').css({'width	':'90px','margin':'3px'});
					$('#err').remove();
				}
			$('#icons input').click(function(){
				var idx=0;
				$("input:checkbox[name=iconses]:checked").each(function(){idx++});
				if(idx!=0){
				$('#err').html(idx+'個のアイコンを選択しました');
				}
				else{
				$('#err').html('クリックしてＤＬしたいアイコンを選択してください');
				}
			});
			$('#matome').click(function(){
			var zip = new JSZip();
			var idx=0;
			$("input:checkbox[name=iconses]:checked").each(function(){idx++});
			if(idx==0){
				$('#err').html('アイコンが選択されていません');
			}
			else{
				$('#err').html(idx+'個のアイコンをダウンロードします');
			}
			if(isIE()&&$.browser.version*1<10){
			$("input:checkbox[name=iconses]:checked").each(function(i){
			var fle=$(this).val();
			var xhr = new XMLHttpRequest();
			xhr.open('GET', "./images/icon/"+fle, true);
			xhr.responseType = "arraybuffer";
			xhr.onreadystatechange = function(evt) {
					if (xhr.readyState === 4) {
						if (xhr.status === 200) {
							zip.file(fle, xhr.response);
							if(i==(idx-1)){
								var content = zip.generate({type:"blob"});
								saveAs(content, "stpk_icons.zip");
							}
						}
					}
				};
				xhr.send();
				});
			}
			else{
			$("input:checkbox[name=iconses]:checked").each(function(i){
				var fle=$(this).val();
				convert64URL("./images/icon/"+fle,function(base64Img){
				zip.file(fle, base64Img,{base64: true} );
				if(i==(idx-1)){
					var content = zip.generate({type:"blob"});
								saveAs(content, "stpk_icons.zip");
					}
				});	
				})
				}
			});		
	});
	function isIE() { return ((navigator.appName == 'Microsoft Internet Explorer') || ((navigator.appName == 'Netscape') && (new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})").exec(navigator.userAgent) != null))); }
		function convert64URL(url, callback, outputFormat){
			var canvas = document.createElement('CANVAS'),
			ctx = canvas.getContext('2d'),
			img = new Image;
			img.crossOrigin = 'Anonymous';
			img.onload = function(){
				var dataURL;
				canvas.height = img.height;
				canvas.width = img.width;
				ctx.drawImage(img, 0, 0);
				dataURL = canvas.toDataURL(outputFormat);
				callback(dataURL.split('base64,')[1]);
				canvas = null; 
			};
			img.src = url;
		}
		

	$('#game_open').click(function popupOpen(e){
			e.preventDefault();
			var popUrl = "game.html";
			var popOption = "width=960, height=638, location=no, resizable=no, scrollbars=no, status=no;"; 
				window.open(popUrl,"",popOption);
		});
		
	</script>
	
	
<!--[if lt IE 7 ]> <body class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <body class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <body class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <body class="ie9"> <![endif]-->
<!--[if (gt IE 9)]><body class="modern"> <![endif]-->
<!--[!(IE)]><!--><body class="notIE modern"> <!--<![endif]-->
</body>
</html>