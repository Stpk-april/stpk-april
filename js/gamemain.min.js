/*

 * Copyright 2015 stpk-april kikaku
 * Licensed under the MIT License
 * http://opensource.org/licenses/MIT
 
*/
$(function(){function e(e){e=$.extend({},L,e),this.id=e.id,this.chk=1,this.speed_up=e.speed_up,this.auto_up=e.auto_up,this.min_up=.01*e.min_up,this.click_up=e.click_up,this.sex=e.sex,this.sex?D++:V++,this.ougon=e.ougon,1==this.ougon&&J++,this.maguro=e.maguro,1==this.maguro&&N++,this.genre=e.genre,this.txt=e.txt,this.default_x=$(this.id).css("left"),this.default_y=$(this.id).css("top"),this.default_z=$(this.id).css("z-index"),console.log(this.default_z),$(this.id).hide(),$(this.id).mouseover(function(t){s(t,e.txt)}).mouseout(function(){$("#help").remove()})}function t(e,t){this.icon=e,this.txt=t,this.checked=0}function o(){k.push(new t("01","蒼天のメモリーを集めました")),k.push(new t("02","赫炎のメモリーを集めました")),k.push(new t("03","漆黒のメモリーを集めました")),k.push(new t("04","白光のメモリーを集めました")),k.push(new t("05","紫影のメモリーを集めました")),k.push(new t("06","黄雷のメモリーを集めました")),k.push(new t("07","灰燼のメモリーを集めました")),k.push(new t("08","すべてのメモリーを集めました")),k.push(new t("09","ヒーローのメモリーを集めました")),k.push(new t("10","ヒロインのメモリーを集めました")),k.push(new t("11","黄金のメモリーを集めました")),k.push(new t("12","マグロのメモリーを集めました")),k.push(new t("13","キラキラ輝いています")),k.push(new t("14","１万回以上手を伸ばしました")),k.push(new t("15","１千回以上クリックしました")),k.push(new t("16","１０万回以上手を伸ばしました")),k.push(new t("17","最後まで諦めないでした"))}function n(e){for(var t in k)if(k[t].icon==e)return k[t]}function i(e,t,o){o=null!=o?o:0,$('<li><div class="arc_'+e+'"></div></li>').appendTo("#archive_").hide().fadeIn().mouseover(function(){$("#view_arc").html(t)}).mouseout(function(){$("#view_arc").html("&nbsp;")}),0==o&&h(t,"arc_"+e),B++,$("#arc_c").html(B)}function c(){for(var e=0;e<P.length;e++)P[e]==Y[e]&&-1!=n("0"+(1+e)).checked&&(n("0"+(e+1)).ap_archive(),n("0"+(e+1)).checked=-1);U==V&&(n("09").ap_archive(),n("09").checked=-1,U=-10),Z==D&&(i("10","ヒロインのメモリーを集めました"),Z=-10),C==N&&(i("12","マグロのメモリーを集めました"),C=-99),q==J&&(i("11","黄金瞳のメモリーを集めました"),q=-999),Z+U==-20&&i("08","すべてのメモリーを集めました")}function a(e){e=$.extend({},it,e),this.name=e.name,this.id="#"+e.id,this.thumb=e.thumb,(-1!=this.thumb.indexOf(".jpg")||-1!=this.thumb.indexOf(".png"))&&(this.thumb="url("+this.thumb+")"),this.checked=0,this.type=e.type,this.cost=e.cost,this.option1=e.option1,this.option2=e.option2,-1==this.id.indexOf("00")&&(W=$('<input type="radio"> </input>').attr({id:e.id,name:e.type+"_ch"}),et=$('<label for="'+e.id+'"> </label>'),tt=$("<div>"+e.name+"</div>").attr("id",e.id+"_label").css("position","relative"),ot=$('<div class="thema_box"></div>').css({height:"thema"==e.type?"40px":"60px",width:"thema"==e.type?"":"85px",background:this.thumb}),nt=$('<div class="lock_box">'+e.cost+"</div>").attr("id",e.id+"_lock"),tt.append(nt),tt.prepend(ot),et.append(tt),$("#chg_"+this.type).append(W,et))}function s(e,t){var o=e.clientY+3,n=e.clientX+3;$("body").append('<div id="help" class="help_w div_round" style="position:fixed;top:'+o+"px;z-index:9999;left:"+n+'px;">'+t+"</div>"),$("#help").hide().fadeIn()}function h(e,t){t=null!=t?t:null,$().toastmessage("showToast",{text:e,sticky:!1,position:"bottom-right",type:"success",close:function(){},icon:t})}function u(){T=A;var e=F;$("#te_second").html(e.toFixed(3)+"~"+T.toFixed(3))}function p(){j+=Math.random()*(A-F)+F,m=m+Math.random()*(A-F)+F,-1!=n("14").checked&&j>1e4?(n("14").ap_archive(),n("14").checked=-1):-1!=n("16").checked&&j>1e5&&(n("16").ap_archive(),n("16").checked=-1);var e=Math.floor(m);$(g).html(e)}function l(e){1!=Q[e].checked?(H++,5==H&&(n("13").checked=-1,n("13").ap_archive()),Q[e].checked=1,m-=Q[e].cost,$(Q[e].id+"_lock").fadeOut(),$("#now_thema").attr("href",Q[e].option1)):$("#now_thema").attr("href",Q[e].option1)}function r(){if("localStorage"in window&&null!=window.localStorage){localStorage.setItem("count",m),localStorage.setItem("cnt_ck",1==b?1:0),localStorage.setItem("aki_ck",1==y?1:0),localStorage.setItem("tictac_c",S),localStorage.setItem("tictac_l",M),localStorage.setItem("tictac",I),localStorage.setItem("plus_second",A),localStorage.setItem("plus_second_or",z),localStorage.setItem("char_count",w),localStorage.setItem("te_sc",T),localStorage.setItem("min_cnt",O),localStorage.setItem("min",F),localStorage.setItem("click_cnt",X),localStorage.setItem("total_c",j),localStorage.setItem("click_cnt_or",E),localStorage.setItem("male",U),localStorage.setItem("female",Z),localStorage.setItem("ougon",q),localStorage.setItem("maguro",C),localStorage.setItem("tot_clk",K);var e,t="";for(e=0;e<f.length;e++)t+=f[e].chk+",";for(t=t.substr(0,t.length-1),localStorage.setItem("char_list",t),t="",e=0;e<v.length;e++)t+=v[e]+",";for(t=t.substr(0,t.length-1),""==t&&(t="null"),localStorage.setItem("char_list_num",t),t="",e=0;e<P.length;e++)t+=P[e]+",";for(t=t.substr(0,t.length-1),localStorage.setItem("arcv",t),t="",e=0;e<k.length;e++)t+=k[e].checked+",";for(t=t.substr(0,t.length-1),localStorage.setItem("arcv_list",t),t="",e=0;e<Q.length;e++)t+=Q[e].checked+",";for(t=t.substr(0,t.length-1),localStorage.setItem("comp_thema",t),t="",e=0;e<R.length;e++)t+=R[e].checked+",";for(t=t.substr(0,t.length-1),localStorage.setItem("comp_onsen",t),t="",e=0;e<G.length;e++)t+=G[e].checked+",";t=t.substr(0,t.length-1),localStorage.setItem("comp_back",t),h("セーブ完了")}}var d,_,g,m=0,f=new Array,k=new Array,v=new Array,w=0,x=0,b=!1,y=!1,I=2e3,S=0,M=0,A=1,z=0,T=0,O=.1,F=.1,X=0,j=0,E=0,B=0,P=new Array(0,0,0,0,0,0,0),Y=new Array(3,3,3,2,3,2,2),U=0,Z=0,q=0,C=0,V=0,D=0,J=0,N=0,Q=new Array,R=new Array,G=new Array,H=0,K=(new Array("","",""),0);Array.prototype.remove=function(e){return this.splice(e,1),this};var L={speed_up:0,auto_up:0,min_up:0,click_up:0,sex:!1,ougon:!1,maguro:!1,genre:0};e.prototype.show_=function(){$(this.id).fadeIn()},e.prototype.set_xy=function(e,t){$(this.id).css(e,t)},e.prototype.set_defaultxy=function(){$(this.id).css("top",this.default_y),$(this.id).css("left",this.default_x),$(this.id).css("z-index",this.default_z)},e.prototype.do_skill=function(){I-=this.speed_up,A+=this.auto_up,X+=this.click_up,O+=this.min_up,O>=1&&(O=1),F=A*O,u(),clearInterval(d),d=setInterval(p,I)},e.prototype.chk_cha=function(){P[this.genre]++,1==this.sex?Z++:U++,1==this.ougon&&q++,1==this.maguro&&C++},e.prototype.get_char=function(){return this.id+","+this.chk},t.prototype.ap_archive=function(e){e=null!=e?e:0,B++;var t=this.txt;$('<li><div class="arc_'+this.icon+'"></div></li>').appendTo("#archive_").hide().fadeIn().mouseover(function(){$("#view_arc").html(t)}).mouseout(function(){$("#view_arc").html("&nbsp;")}),0==e&&h(this.txt,"arc_"+this.icon),this.checked_=-1,$("#arc_c").html(B)},window.console.log=function(){window.console.log=function(){return!1}};var W,et,tt,ot,nt,it={name:"none",thumb:"images/on_thumb00.png",option1:"",option2:""};window.onload=function(){d=setInterval(p,I),_=setInterval(r,3e5),g=document.getElementById("btnCount")},$(function(){for(var t=1;9>=t;t++)$('<div id="char_0'+t+'" class="onsen_ch"/>').appendTo("#clickbut"),v.push(t-1);for(var t=10;18>=t;t++)$("#clickbut").append('<div id="char_'+t+'" class="onsen_ch"/>'),v.push(t-1);f.push(new e({id:"#char_18",genre:2,sex:!1,ougon:!1,maguro:!0,speed_up:20,auto_up:15,min_up:5,click_up:10,txt:"M"})),f.push(new e({id:"#char_17",genre:6,sex:!0,ougon:!1,maguro:!1,speed_up:10,auto_up:25,min_up:0,click_up:15,txt:"ジュネ"})),f.push(new e({id:"#char_16",genre:2,sex:!0,ougon:!1,maguro:!1,speed_up:15,auto_up:15,min_up:0,click_up:20,txt:"シャーリィ"})),f.push(new e({id:"#char_15",genre:0,sex:!0,ougon:!1,maguro:!1,speed_up:50,auto_up:0,min_up:0,click_up:0,txt:"コーニー"})),f.push(new e({id:"#char_14",genre:4,sex:!0,ougon:!1,maguro:!1,speed_up:0,auto_up:20,min_up:20,click_up:10,txt:"リリィ"})),f.push(new e({id:"#char_13",genre:3,sex:!0,ougon:!0,maguro:!1,speed_up:0,auto_up:0,min_up:0,click_up:50,txt:"クセル"})),f.push(new e({id:"#char_12",genre:5,sex:!0,ougon:!0,maguro:!1,speed_up:0,auto_up:50,min_up:0,click_up:0,txt:"ネオン"})),f.push(new e({id:"#char_11",genre:2,sex:!0,ougon:!0,maguro:!1,speed_up:50,auto_up:0,min_up:0,click_up:0,txt:"メアリ"})),f.push(new e({id:"#char_10",genre:0,sex:!0,ougon:!0,maguro:!1,speed_up:10,auto_up:20,min_up:10,click_up:10,txt:"シェラ"})),f.push(new e({id:"#char_09",genre:1,sex:!0,ougon:!0,maguro:!1,speed_up:5,auto_up:10,min_up:0,click_up:35,txt:"アティ"})),f.push(new e({id:"#char_08",genre:4,sex:!0,ougon:!0,maguro:!1,speed_up:0,auto_up:25,min_up:25,click_up:0,txt:"エリシア"})),f.push(new e({id:"#char_07",genre:1,sex:!0,ougon:!1,maguro:!1,speed_up:0,auto_up:0,min_up:0,click_up:50,txt:"キーア"})),f.push(new e({id:"#char_06",genre:6,sex:!1,ougon:!0,maguro:!1,speed_up:5,auto_up:15,min_up:0,click_up:30,txt:"キリエ"})),f.push(new e({id:"#char_05",genre:5,sex:!1,ougon:!1,maguro:!1,speed_up:25,auto_up:0,min_up:25,click_up:0,txt:"テスラ"})),f.push(new e({id:"#char_04",genre:1,sex:!1,ougon:!1,maguro:!0,speed_up:25,auto_up:20,min_up:0,click_up:5,txt:"ギー"})),f.push(new e({id:"#char_03",genre:0,sex:!1,ougon:!0,maguro:!1,speed_up:0,auto_up:20,min_up:15,click_up:15,txt:"カル"})),f.push(new e({id:"#char_02",genre:4,sex:!1,ougon:!1,maguro:!1,speed_up:15,auto_up:25,min_up:0,click_up:10,txt:"Ａ"})),f.push(new e({id:"#char_01",genre:3,sex:!1,ougon:!1,maguro:!1,speed_up:30,auto_up:5,min_up:5,click_up:10,txt:"アスル"})),o(),$("#chg_thema").toggle(),$("#chg_onsen").toggle(),$("#chg_back").toggle(),$("#thema").click(function(){$("#chg_onsen").hide(),$("#chg_back").hide(),$("#chg_thema").slideToggle()}),$("#onsen").click(function(){$("#chg_back").hide(),$("#chg_thema").hide(),$("#chg_onsen").slideToggle()}),$("#back_").click(function(){$("#chg_onsen").hide(),$("#chg_thema").hide(),$("#chg_back").slideToggle()}),Q.push(new a({id:"chg00",type:"thema",cost:0,option1:"ani_cha.css"})),Q[0].checked=1,Q.push(new a({name:"黄色",id:"chg01",thumb:"#FFFF00",type:"thema",cost:1e4,option1:"ani_cha3.css"})),Q.push(new a({name:"オレンジ",id:"chg08",thumb:"#FFC76B",type:"thema",cost:1e4,option1:"ani_cha2.css"})),Q.push(new a({name:"蒼色",id:"chg04",thumb:"#A4E7F5",type:"thema",cost:1e4,option1:"ani_cha4.css"})),$("#change_s").click(function(){$("#shop").slideToggle("slow")}).mouseover(function(){$("#view_help").html("ショップを見る")}).mouseout(function(){$("#view_help").html("&nbsp;")}),$("#change_a").click(function(){$("#archives").slideToggle("slow")}).mouseover(function(){$("#view_help").html("アーカイブス記録を見る")}).mouseout(function(){$("#view_help").html("&nbsp;")}),$(".exit").click(function(){$(this).parent().fadeOut()}),$("#chg_thema input").click(function(e){var t=$("#chg_thema input").index(this);return m<Q[t].cost&&1!=Q[t].checked?(e.stopPropagation(),!1):void l(t)}),R.push(new a({id:"onsen00",type:"onsen",cost:0,option1:"onsen/onsen1.png"})),R[0].checked=1,R.push(new a({id:"onsen01",name:"室内温泉",type:"onsen",cost:1e4,thumb:"images/on_thumb01.png",option1:"onsen/onsen2.jpg",option2:"#char_11:top:400px:left:830px:z-index:3/#char_16:left:376px:top:470px:z-index:2"})),R.push(new a({id:"onsen02",name:"野外温泉",type:"onsen",cost:1e4,thumb:"images/on_thumb01.png",option1:"onsen/onsen3.jpg",option2:"#char_07:top:304px:left:363px:z-index:0/#char_11:top:414px:left:436px:z-index:3/#char_09:top:247px:left:156px/#char_01:top:240px:left:429px:z-index:0"})),$("#chg_onsen input").click(function(e){var t=$("#chg_onsen input").index(this);if(m<R[t].cost&&1!=R[t].checked)return e.stopPropagation(),!1;for(i=0;i<f.length;i++)f[i].set_defaultxy();m>R[t].cost&&1!=R[t].checked&&(R[t].checked=1,H++,m-=R[t].cost,$(R[t].id+"_lock").fadeOut(),5==H&&(n("13").checked=-1,n("13").ap_archive())),$("#clickbut").css("background","url("+R[t].option1+")");for(var o=R[t].option2.split("/"),i=0;i<o.length;i++)for(var c=o[i].split(":"),a=1;a<c.length;a+=2)$(c[0]).css(c[a],c[a+1])}),G.push(new a({id:"back00",type:"back",cost:0,option1:"onsen/onsen1.png"})),$("#chg_back input:eq(0),#chg_back label:eq(0)").hide(),G.push(new a({id:"back01",name:"カダスｾｯﾄ",type:"back",cost:3e4,option1:"onsen/onsen1.png"})),G.push(new a({id:"back02",name:"地球ｾｯﾄ",type:"back",cost:3e4,option1:"onsen/onsen1.png"})),$("#chg_back input").click(function(e){var t=$("#chg_back input").index(this);return m<G[t].cost&&1!=G[t].checked?!1:(1!=G[t].checked&&(m-=G[t].cost,G[t].checked=1,$(G[t].id+"_lock").fadeOut()),window.location.href=1==t?"https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAcXlOVzUyUnZhcVU":"https://drive.google.com/uc?export=download&id=0B2pOZywE5TjAY0JPdjRQN1pDakE",void e.stopPropagation())}),$("#clickbut").bind("click",function(e){j+=1+X,m+=1+X,K++,$(g).html(Math.floor(m));var t=e.pageX+8-Math.floor(20*Math.random()),o=e.pageY-40,i=$('<div class="aaa" style="pointer-events: none;position:fixed;cursor:pointer;opacity:1;top:'+o+"px;left:"+t+'px;"><h3>+'+(1+X)+"</h3></div>");i.appendTo(this).animate({top:o-50,opacity:0},1e3,"linear",function(){$(this).remove()}),t=e.pageX-60+Math.floor(30*Math.random()),o=e.pageY-80;var c=$('<div class="steam" style="top:'+o+"px;left:"+t+'px;"></div>');0==Math.floor(2*Math.random())&&(c=$('<div class="steam" style="background:url(images/steam02.png);background-size:100%;top:'+o+"px;left:"+t+'px;"></div>')),c.appendTo(this).animate({top:o-100,left:t-20,width:200,height:200,opacity:0},2e3,"linear",function(){$(this).remove()}),K>=1e3&&-1!=n("15").checked&&(n("15").ap_archive(),n("15").checked=-1)}),$("#button5").bind("click",function(){m>=(E+1)*(E+1)*20&&(m-=(E+1)*(E+1)*20,X++,E++,$(g).html(Math.floor(m)),$("#now_a_l").html(E),$("#now_a").html((E+1)*(E+1)*20),$(this).attr("data-hover",(E+1)*(E+1)*20+"回消費"))}).bind("touchstart mouseover",function(){$("#view_help").html("クリック時の手を伸ばす回数が増えます")}).bind("touchend mouseout",function(){$("#view_help").html("&nbsp;")}),$("#button1").bind("click",function(){m>=(z+1)*(z+1)*200&&(m-=(z+1)*(z+1)*200,A++,z++,F=A*O,u(),$(g).html(Math.floor(m)),$("#now_k_l").html(z),$(this).attr("data-hover",(z+1)*(z+1)*200+"回消費"))}).bind("mouseover touchstart",function(){$("#view_help").html("自動的に手を伸ばす回数を増えます")}).bind("mouseout touchend",function(){$("#view_help").html("&nbsp;")}),$("#change_h").click(function(){$("#helps_int").fadeIn()}),$("#helps_int").click(function(){$(this).hide()}),$("#button3").bind("click",function(){var e=(1+M)*(1+M)*300;m>=e&&15>M&&(m-=e,I-=100,M++,clearInterval(d),d=setInterval(p,I),$(g).html(Math.floor(m)),u(),$("#now_c_l").html(M),$(this).attr("data-hover",(1+M)*(1+M)*300+"回消費"),0==y&&15==M&&(n("17").ap_archive(),n("17").checked=-1,y=!0,$("#now_c_l").html("MAX"),$(this).attr("data-hover","MAX")))}).bind("touchstart mouseover",function(){$("#view_help").html("自動的に手を伸ばす速度が増えます")}).bind("touchend mouseout",function(){$("#view_help").html("&nbsp;")}),$("#button4").bind("click",function(){if(v.length>0&&m>=400*w*w){m-=400*w*w;var e=Math.floor(Math.random()*v.length);f[v[e]].show_(),f[v[e]].do_skill(),f[v[e]].chk=-1,f[v[e]].chk_cha(),w++,x++,$("#now_cha_l").html(w);var t=Math.floor(m);$(g).html(t),v.remove(e),c(),0==v.length?($("#now_cha_l").html("MAX"),$(this).attr("data-hover","全員集合！")):$(this).attr("data-hover",400*w*w+"回消費"),r()}}).bind("touchstart mouseover",function(){$("#view_help").html("ランダムにキャラクターが増えます。ガチャ！")}).bind("touchend mouseout",function(){$("#view_help").html("&nbsp;")}),u(),$("#shop,#archives").hide().draggable({opacity:"0.5"})})});